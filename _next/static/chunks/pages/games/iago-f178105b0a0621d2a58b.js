_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[168],{sE0O:function(t,e,n){"use strict";n.r(e),n.d(e,"Game",(function(){return k}));var s=n("ERkP"),r=n.n(s),o=n("rePB"),a=n("cDpP");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var s=0,r=function(){};return{s:r,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var T,A,l={},p={amazons:"queen",stones:"pawn"},f={amazons:[["units"],["units","myunits","myamazons"],["units","oppunits","oppamazons"]],stones:[["units","stones"],["units","myunits","stones","mystones"],["units","oppunits","stones","oppstones"]]},v={amazons:[["units"],["units","oppunits","oppamazons"],["units","myunits","myamazons"]],stones:[["units","stones"],["units","oppunits","stones","oppstones"],["units","myunits","stones","mystones"]]},N={movetargets:{},firetargets:{},victims:{}},g={gameId:"iago",commands:{move:{},fire:{}},iconMap:p,setBoard:function(t){Object(a.O)(t,1),Object(a.O)(t,2),A={height:t.height,width:t.width},Object(a.e)(A),T=Object(a.d)(t),Object(a.z)(t)},newBattle:function(t,e){var n=Object(a.L)(t),s={units:{},myunits:{},oppunits:{},myamazons:{},oppamazons:{},stones:{},mystones:{},oppstones:{}};for(var r in n){var o,i=n[r],c=i.group,m=i.pos,T=i.owner,A=u(v[c][T]);try{for(A.s();!(o=A.n()).done;){s[o.value][m]=i}}catch(l){A.e(l)}finally{A.f()}}return g.action["startTurn_".concat(e,"_1")]({NEXTSPAWNID:1,TURN:0,UNITDATA:n,UNITLAYERS:s})},action:{startTurn_basic_1:function(t){for(var e=t.UNITLAYERS,n={units:e.units,myunits:e.oppunits,oppunits:e.myunits,myamazons:e.oppamazons,oppamazons:e.myamazons,stones:e.stones,mystones:e.oppstones,oppstones:e.mystones},s={marks:{},commands:{}},r=0,o=Object.keys(n.myamazons);r<o.length;r++){var a=o[r];s.marks[a]="selectunit_basic_1"}return{UNITDATA:t.UNITDATA,LINKS:s,UNITLAYERS:n,ARTIFACTS:N,MARKS:{},TURN:t.TURN+1,NEXTSPAWNID:t.NEXTSPAWNID,TURNVARS:{}}},startTurn_basic_2:function(t){for(var e=t.UNITLAYERS,n={units:e.units,myunits:e.oppunits,oppunits:e.myunits,myamazons:e.oppamazons,oppamazons:e.myamazons,stones:e.stones,mystones:e.oppstones,oppstones:e.mystones},s={marks:{},commands:{}},r=0,o=Object.keys(n.myamazons);r<o.length;r++){var a=o[r];s.marks[a]="selectunit_basic_2"}return{UNITDATA:t.UNITDATA,LINKS:s,UNITLAYERS:n,ARTIFACTS:N,MARKS:{},TURN:t.TURN,NEXTSPAWNID:t.NEXTSPAWNID,TURNVARS:{}}},selectunit_basic_1:function(t,e){var n,s={movetargets:{}},r={marks:{},commands:{}},o={selectunit:e},i=t.UNITLAYERS,c=i.oppunits,m=u(a.I);try{for(m.s();!(n=m.n()).done;)for(var A=n.value,p=o.selectunit;(p=T[p][A])&&!c[p];)i.units[p]||(s.movetargets[p]=l)}catch(g){m.e(g)}finally{m.f()}for(var f=0,v=Object.keys(s.movetargets);f<v.length;f++){var N=v[f];r.marks[N]="selectmovetarget_basic_1"}return{LINKS:r,ARTIFACTS:s,UNITLAYERS:i,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:o,TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID}},selectmovetarget_basic_1:function(t,e){var n={marks:{},commands:{}};return n.commands.move="move_basic_1",{LINKS:n,ARTIFACTS:t.ARTIFACTS,UNITLAYERS:t.UNITLAYERS,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:{selectunit:t.MARKS.selectunit,selectmovetarget:e},TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID,canAlwaysEnd:!0}},selectfiretarget_basic_1:function(t,e){var n,s={movetargets:t.ARTIFACTS.movetargets,firetargets:t.ARTIFACTS.firetargets,victims:{}},r={marks:{},commands:{}},o={selectfiretarget:e},i=t.UNITLAYERS,c=i.oppstones,m=i.myunits,A=u(a.I);try{for(A.s();!(n=A.n()).done;){for(var p=n.value,f=[],v="",N=o.selectfiretarget;!(v=(N=T[N][p])?m[N]?"hitblock":c[N]?null:"nomoresteps":"outofbounds");)f.push(N);for(var g=0;g<f.length;g++)N=f[g],"hitblock"===v&&(s.victims[N]=l)}}catch(R){A.e(R)}finally{A.f()}return r.commands.fire="fire_basic_1",{LINKS:r,ARTIFACTS:s,UNITLAYERS:i,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:o,TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID}},selectunit_basic_2:function(t,e){var n,s={movetargets:{}},r={marks:{},commands:{}},o={selectunit:e},i=t.UNITLAYERS,c=i.oppunits,m=u(a.I);try{for(m.s();!(n=m.n()).done;)for(var A=n.value,p=o.selectunit;(p=T[p][A])&&!c[p];)i.units[p]||(s.movetargets[p]=l)}catch(g){m.e(g)}finally{m.f()}for(var f=0,v=Object.keys(s.movetargets);f<v.length;f++){var N=v[f];r.marks[N]="selectmovetarget_basic_2"}return{LINKS:r,ARTIFACTS:s,UNITLAYERS:i,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:o,TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID}},selectmovetarget_basic_2:function(t,e){var n={marks:{},commands:{}};return n.commands.move="move_basic_2",{LINKS:n,ARTIFACTS:t.ARTIFACTS,UNITLAYERS:t.UNITLAYERS,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:{selectunit:t.MARKS.selectunit,selectmovetarget:e},TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID,canAlwaysEnd:!0}},selectfiretarget_basic_2:function(t,e){var n,s={movetargets:t.ARTIFACTS.movetargets,firetargets:t.ARTIFACTS.firetargets,victims:{}},r={marks:{},commands:{}},o={selectfiretarget:e},i=t.UNITLAYERS,c=i.oppstones,m=i.myunits,A=u(a.I);try{for(A.s();!(n=A.n()).done;){for(var p=n.value,f=[],v="",N=o.selectfiretarget;!(v=(N=T[N][p])?m[N]?"hitblock":c[N]?null:"nomoresteps":"outofbounds");)f.push(N);for(var g=0;g<f.length;g++)N=f[g],"hitblock"===v&&(s.victims[N]=l)}}catch(R){A.e(R)}finally{A.f()}return r.commands.fire="fire_basic_2",{LINKS:r,ARTIFACTS:s,UNITLAYERS:i,UNITDATA:t.UNITDATA,TURN:t.TURN,MARKS:o,TURNVARS:t.TURNVARS,NEXTSPAWNID:t.NEXTSPAWNID}},move_basic_1:function(t){var e={marks:{},commands:{}},n={movetargets:t.ARTIFACTS.movetargets,firetargets:{}},s=t.UNITLAYERS,r=c({},t.TURNVARS),o=c({},t.UNITDATA),i=t.TURN,m=t.MARKS;r.movedto=m.selectmovetarget;var A=(s.units[m.selectunit]||{}).id;for(var p in A&&(o[A]=c(c({},o[A]),{},{pos:m.selectmovetarget})),s={units:{},myunits:{},oppunits:{},myamazons:{},oppamazons:{},stones:{},mystones:{},oppstones:{}},o){var v,N=o[p],g=N.group,R=N.pos,S=N.owner,b=u(f[g][S]);try{for(b.s();!(v=b.n()).done;){s[v.value][R]=N}}catch(E){b.e(E)}finally{b.f()}}var I,y=s.oppunits,d=u(a.I);try{for(d.s();!(I=d.n()).done;)for(var U=I.value,h=r.movedto;(h=T[h][U])&&!y[h];)s.units[h]||(n.firetargets[h]=l)}catch(E){d.e(E)}finally{d.f()}if(1===i)e.starvation={endGame:["draw","win","lose"][Object(a.Q)(Object.keys(s.mystones).length,Object.keys(s.oppstones).length)],endedBy:"dominance",endMarks:Object.keys([l,s.mystones,s.oppstones][Object(a.Q)(Object.keys(s.mystones).length,Object.keys(s.oppstones).length)])},e.endTurn="startTurn_basic_2";else for(var _=0,O=Object.keys(n.firetargets);_<O.length;_++){var j=O[_];e.marks[j]="selectfiretarget_basic_1"}return{LINKS:e,MARKS:{},ARTIFACTS:n,TURN:i,UNITDATA:o,UNITLAYERS:s,TURNVARS:r,NEXTSPAWNID:t.NEXTSPAWNID}},fire_basic_1:function(t){var e={marks:{},commands:{}},n={enterFrom:{},exitTo:{},ghosts:[]},s={movetargets:t.ARTIFACTS.movetargets,firetargets:t.ARTIFACTS.firetargets,victims:t.ARTIFACTS.victims},r=t.UNITLAYERS,o=t.TURNVARS,i=c({},t.UNITDATA),m=t.NEXTSPAWNID,T=t.MARKS;n.enterFrom[T.selectfiretarget]=o.movedto;var A="spawn"+m++;for(var p in i[A]={pos:T.selectfiretarget,id:A,group:"stones",owner:1},s.victims){var v=(r.units[p]||{}).id;v&&(i[v]=c(c({},i[v]),{},{owner:1}))}for(var N in r={units:{},myunits:{},oppunits:{},myamazons:{},oppamazons:{},stones:{},mystones:{},oppstones:{}},i){var g,R=i[N],S=R.group,b=R.pos,I=R.owner,y=u(f[S][I]);try{for(y.s();!(g=y.n()).done;){r[g.value][b]=R}}catch(d){y.e(d)}finally{y.f()}}return e.starvation={endGame:["draw","win","lose"][Object(a.Q)(Object.keys(r.mystones).length,Object.keys(r.oppstones).length)],endedBy:"dominance",endMarks:Object.keys([l,r.mystones,r.oppstones][Object(a.Q)(Object.keys(r.mystones).length,Object.keys(r.oppstones).length)])},e.endTurn="startTurn_basic_2",{LINKS:e,MARKS:{},ARTIFACTS:s,TURN:t.TURN,UNITDATA:i,UNITLAYERS:r,TURNVARS:o,NEXTSPAWNID:m,anim:n}},move_basic_2:function(t){var e={marks:{},commands:{}},n={movetargets:t.ARTIFACTS.movetargets,firetargets:{}},s=t.UNITLAYERS,r=c({},t.TURNVARS),o=c({},t.UNITDATA),i=t.MARKS;r.movedto=i.selectmovetarget;var m=(s.units[i.selectunit]||{}).id;for(var A in m&&(o[m]=c(c({},o[m]),{},{pos:i.selectmovetarget})),s={units:{},myunits:{},oppunits:{},myamazons:{},oppamazons:{},stones:{},mystones:{},oppstones:{}},o){var p,f=o[A],N=f.group,g=f.pos,R=f.owner,S=u(v[N][R]);try{for(S.s();!(p=S.n()).done;){s[p.value][g]=f}}catch(j){S.e(j)}finally{S.f()}}var b,I=s.oppunits,y=u(a.I);try{for(y.s();!(b=y.n()).done;)for(var d=b.value,U=r.movedto;(U=T[U][d])&&!I[U];)s.units[U]||(n.firetargets[U]=l)}catch(j){y.e(j)}finally{y.f()}for(var h=0,_=Object.keys(n.firetargets);h<_.length;h++){var O=_[h];e.marks[O]="selectfiretarget_basic_2"}return{LINKS:e,MARKS:{},ARTIFACTS:n,TURN:t.TURN,UNITDATA:o,UNITLAYERS:s,TURNVARS:r,NEXTSPAWNID:t.NEXTSPAWNID}},fire_basic_2:function(t){var e={marks:{},commands:{}},n={enterFrom:{},exitTo:{},ghosts:[]},s={movetargets:t.ARTIFACTS.movetargets,firetargets:t.ARTIFACTS.firetargets,victims:t.ARTIFACTS.victims},r=t.UNITLAYERS,o=t.TURNVARS,i=c({},t.UNITDATA),m=t.NEXTSPAWNID,T=t.MARKS;n.enterFrom[T.selectfiretarget]=o.movedto;var A="spawn"+m++;for(var p in i[A]={pos:T.selectfiretarget,id:A,group:"stones",owner:2},s.victims){var f=(r.units[p]||{}).id;f&&(i[f]=c(c({},i[f]),{},{owner:2}))}for(var N in r={units:{},myunits:{},oppunits:{},myamazons:{},oppamazons:{},stones:{},mystones:{},oppstones:{}},i){var g,R=i[N],S=R.group,b=R.pos,I=R.owner,y=u(v[S][I]);try{for(y.s();!(g=y.n()).done;){r[g.value][b]=R}}catch(d){y.e(d)}finally{y.f()}}return e.starvation={endGame:["draw","lose","win"][Object(a.Q)(Object.keys(r.oppstones).length,Object.keys(r.mystones).length)],endedBy:"dominance",endMarks:Object.keys([l,r.mystones,r.oppstones][Object(a.Q)(Object.keys(r.mystones).length,Object.keys(r.oppstones).length)])},e.endTurn="startTurn_basic_1",{LINKS:e,MARKS:{},ARTIFACTS:s,TURN:t.TURN,UNITDATA:i,UNITLAYERS:r,TURNVARS:o,NEXTSPAWNID:m,anim:n}}},instruction:{startTurn_basic_1:function(t){return Object(a.g)({line:[{select:"Select"},{unittype:["queen",1]},{text:"to move"}]})},move_basic_1:function(t){var e=t.TURNVARS,n=t.UNITLAYERS;return 1===t.TURN?Object(a.g)({line:[{text:"Press "},{endTurn:"end turn"},{text:" to submit your moves and hand over to "},{player:2},{text:"(you don't get to fire the first turn)"}]}):Object(a.g)({line:[{text:"Select where to fire with"},{unit:[p[(n.units[e.movedto]||{}).group],(n.units[e.movedto]||{}).owner,e.movedto]}]})},fire_basic_1:function(){return Object(a.l)(1)},selectunit_basic_1:function(t){var e=t.MARKS,n=t.UNITLAYERS;return Object(a.g)({line:[{text:"Select where to move"},{unit:[p[(n.units[e.selectunit]||{}).group],(n.units[e.selectunit]||{}).owner,e.selectunit]}]})},selectmovetarget_basic_1:function(t){var e=t.MARKS,n=t.UNITLAYERS;return Object(a.g)({line:[{text:"Press"},{command:"move"},{text:"to move"},{unit:[p[(n.units[e.selectunit]||{}).group],(n.units[e.selectunit]||{}).owner,e.selectunit]},{text:"to"},{pos:e.selectmovetarget}]})},selectfiretarget_basic_1:function(t){var e=t.ARTIFACTS,n=t.MARKS,s=t.UNITLAYERS;return Object(a.g)({line:[{text:"Press"},{command:"fire"},{text:"to spawn"},{unit:["pawn",1,n.selectfiretarget]},0!==Object.keys(e.victims).length?Object(a.g)({line:[{text:"and capture"},Object(a.g)({line:Object.keys(e.victims).filter((function(t){return s.units[t]})).map((function(t){return{unit:[p[s.units[t].group],s.units[t].owner,t]}})).reduce((function(t,e,n,s){return t.push(e),n===s.length-2?t.push({text:" and "}):n<s.length-2&&t.push({text:", "}),t}),[])})]}):void 0]})},startTurn_basic_2:function(t){return Object(a.g)({line:[{select:"Select"},{unittype:["queen",2]},{text:"to move"}]})},move_basic_2:function(t){var e=t.TURNVARS,n=t.UNITLAYERS;return Object(a.g)({line:[{text:"Select where to fire with"},{unit:[p[(n.units[e.movedto]||{}).group],(n.units[e.movedto]||{}).owner,e.movedto]}]})},fire_basic_2:function(){return Object(a.l)(2)},selectunit_basic_2:function(t){var e=t.MARKS,n=t.UNITLAYERS;return Object(a.g)({line:[{text:"Select where to move"},{unit:[p[(n.units[e.selectunit]||{}).group],(n.units[e.selectunit]||{}).owner,e.selectunit]}]})},selectmovetarget_basic_2:function(t){var e=t.MARKS,n=t.UNITLAYERS;return Object(a.g)({line:[{text:"Press"},{command:"move"},{text:"to move"},{unit:[p[(n.units[e.selectunit]||{}).group],(n.units[e.selectunit]||{}).owner,e.selectunit]},{text:"to"},{pos:e.selectmovetarget}]})},selectfiretarget_basic_2:function(t){var e=t.ARTIFACTS,n=t.MARKS,s=t.UNITLAYERS;return Object(a.g)({line:[{text:"Press"},{command:"fire"},{text:"to spawn"},{unit:["pawn",2,n.selectfiretarget]},0!==Object.keys(e.victims).length?Object(a.g)({line:[{text:"and capture"},Object(a.g)({line:Object.keys(e.victims).filter((function(t){return s.units[t]})).map((function(t){return{unit:[p[s.units[t].group],s.units[t].owner,t]}})).reduce((function(t,e,n,s){return t.push(e),n===s.length-2?t.push({text:" and "}):n<s.length-2&&t.push({text:", "}),t}),[])})]}):void 0]})}},variants:[{ruleset:"basic",board:"basic",setup:"basic",desc:"regular",code:"r",arr:{setup:{amazons:{1:["c6","d1","a7","j4"],2:["c2","d10","g1","j7"]},stones:{1:["e5","f6"],2:["e6","f5"]}},marks:["c2"],potentialMarks:["c1","c3","c4","c5","a2","b2","d2","e2","f2","g2","h2","i2","j2","a4","b3","b1","d3","e4","g6","h7","i8","j9"]}}],boards:{basic:{height:10,width:10,terrain:{}}},setups:{basic:{amazons:{1:["g10","d1","a7","j4"],2:["a4","d10","g1","j7"]},stones:{1:["e5","f6"],2:["e6","f5"]}}}},R=g,S=n("nIA/"),b=Object(S.a)(R),I=n("qZ01"),y=n("qo6+"),d=n("wV/d"),U=n("m4fT"),h={api:b,graphics:I.a,meta:y.a,demo:d.a,rules:U.a,imgsToPreload:["/images/games/iago/othello.jpg","/images/games/iago/lineage.png"]},_=n("krfZ"),O=n("Xity"),j=n("+zLY"),E=n("0IYK"),w=r.a.createElement,k=function(){var t=Object(E.c)(h.api);return w(O.d.Provider,{value:h},w(O.e.Provider,{value:t},w(_.a,null)))};k.domain="iago",k.mainImage="/images/games/iago/iago_active.png",k.metaDesc="Play the abstract board game Iago at Chessicals! Partisan Othello amazons!",k.metaTitle="Iago by Rey Alicea",k.title="Iago",k.preloadImages=h.imgsToPreload,k.nav=Object(j.a)(h.meta);e.default=k},tpQv:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/iago",function(){return n("sE0O")}])}},[["tpQv",1,0,2,3,4,5,6,7,55,41]]]);