webpackHotUpdate_N_E("pages/games/amazons",{

/***/ "../ui/src/components/GamePage/GamePage.useBattleEffects.ts":
/*!******************************************************************!*\
  !*** ../ui/src/components/GamePage/GamePage.useBattleEffects.ts ***!
  \******************************************************************/
/*! exports provided: useBattleEffects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"useBattleEffects\", function() { return useBattleEffects; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"../../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _local_expose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../local/expose */ \"../local/expose/index.ts\");\n/* harmony import */ var _contexts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../contexts */ \"../ui/src/contexts/index.ts\");\n/* harmony import */ var _common_nav_makeGameNav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../common/nav/makeGameNav */ \"../common/nav/makeGameNav.ts\");\n/* harmony import */ var _common_nav_makeSessionNav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../common/nav/makeSessionNav */ \"../common/nav/makeSessionNav.ts\");\n/* harmony import */ var _remote_utils_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../remote/utils/context */ \"../remote/utils/context.ts\");\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../common */ \"../common/index.ts\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../helpers */ \"../ui/src/helpers/index.ts\");\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\nvar SCREENSHOT = false; // TODO - setting somewhere!\n\nfunction useBattleEffects(opts) {\n  _s();\n\n  var api = opts.api,\n      sessionId = opts.sessionId,\n      state = opts.state,\n      actions = opts.actions,\n      mode = opts.mode,\n      meta = opts.meta,\n      ui = opts.ui;\n  var battleNavActions = Object(_contexts__WEBPACK_IMPORTED_MODULE_2__[\"useBattleNav\"])();\n  var appActions = Object(_contexts__WEBPACK_IMPORTED_MODULE_2__[\"useAppActions\"])();\n  var justStartedNew = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(false);\n  var user = Object(_remote_utils_context__WEBPACK_IMPORTED_MODULE_5__[\"useCurrentUser\"])();\n  var isMounted = Object(_helpers__WEBPACK_IMPORTED_MODULE_7__[\"useIsMounted\"])(); // register api with remote service\n\n  var remoteAPI = Object(_remote_utils_context__WEBPACK_IMPORTED_MODULE_5__[\"useRemoteAPI\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    remoteAPI.game.setGameAPI(api);\n    return function () {\n      return remoteAPI.game.setGameAPI(null);\n    };\n  }, [api]); // subscribe to remote game\n\n  var unsubRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    var _unsubRef$current;\n\n    (_unsubRef$current = unsubRef.current) === null || _unsubRef$current === void 0 ? void 0 : _unsubRef$current.call(unsubRef);\n\n    if (sessionId && Object(_common__WEBPACK_IMPORTED_MODULE_6__[\"sessionIdType\"])(sessionId) === \"remote\") {\n      unsubRef.current = remoteAPI.battle.subscribe({\n        sessionId: sessionId,\n        listener: function listener(_ref) {\n          var battle = _ref.battle,\n              session = _ref.session;\n\n          if (isMounted()) {\n            actions.subscriptionUpdate(session, battle);\n          }\n        }\n      });\n    }\n  }, [sessionId]); // update nav map whenever we change mode or sessionId\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    appActions.setNav(mode === \"gamelobby\" || Object(_common__WEBPACK_IMPORTED_MODULE_6__[\"sessionIdType\"])(sessionId) === \"remote\" && !user ? Object(_common_nav_makeGameNav__WEBPACK_IMPORTED_MODULE_3__[\"makeGameNav\"])(meta) : Object(_common_nav_makeSessionNav__WEBPACK_IMPORTED_MODULE_4__[\"makeSessionNav\"])({\n      mode: mode,\n      session: state.session,\n      battleNavActions: battleNavActions,\n      meta: meta,\n      isNew: Boolean(sessionId && sessionId.match(/new/))\n    }));\n  }, [mode, sessionId, appActions, battleNavActions, user]); // Register last visited game\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    return Object(_local_expose__WEBPACK_IMPORTED_MODULE_1__[\"setLatestVisitedGameId\"])(api.gameId);\n  }, [api.gameId]); // If sessionId changed, get correct session\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    if (sessionId) {\n      if (sessionId.match(/^new_/)) {\n        var code = sessionId.slice(4);\n        justStartedNew.current = true;\n        actions.newLocalSession(code);\n      } else {\n        actions.loadSession(sessionId);\n      }\n    } else {\n      actions.wipe();\n    }\n  }, [sessionId, api]);\n  var currentSessionId = state.session && state.session.id;\n  var hasMoves = (state.battle && state.battle.history.length || 0) >= 2; // If we're in a new session that now has proper history, navigate to it and remember it as last session\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    if (!justStartedNew.current && sessionId && sessionId.match(/^new_/) && currentSessionId && hasMoves) {\n      Object(_local_expose__WEBPACK_IMPORTED_MODULE_1__[\"setLatestSessionInfo\"])(api.gameId, currentSessionId);\n      battleNavActions.toSession(currentSessionId, \"playing\", true);\n    }\n  }, [sessionId, currentSessionId, hasMoves]);\n  justStartedNew.current = false; // Print board state\n\n  if (SCREENSHOT && mode === \"playing\") {\n    console.log(\"SCREENSHOT\", Object(_common__WEBPACK_IMPORTED_MODULE_6__[\"sprites2arrangement\"])({\n      iconMap: api.iconMap,\n      sprites: Object(_common__WEBPACK_IMPORTED_MODULE_6__[\"board2sprites\"])({\n        iconMap: api.iconMap,\n        marks: ui.board.marks,\n        units: ui.board.units,\n        potentialMarks: ui.board.potentialMarks\n      })\n    }));\n  }\n}\n\n_s(useBattleEffects, \"DUHNtbnWfDLzzkm+5kq8bSZtUbM=\", false, function () {\n  return [_contexts__WEBPACK_IMPORTED_MODULE_2__[\"useBattleNav\"], _contexts__WEBPACK_IMPORTED_MODULE_2__[\"useAppActions\"], _remote_utils_context__WEBPACK_IMPORTED_MODULE_5__[\"useCurrentUser\"], _helpers__WEBPACK_IMPORTED_MODULE_7__[\"useIsMounted\"], _remote_utils_context__WEBPACK_IMPORTED_MODULE_5__[\"useRemoteAPI\"]];\n});\n\n;\n    var _a, _b;\n    // Legacy CSS implementations will `eval` browser code in a Node.js context\n    // to extract CSS. For backwards compatibility, we need to check we're in a\n    // browser context before continuing.\n    if (typeof self !== 'undefined' &&\n        // AMP / No-JS mode does not inject these helpers:\n        '$RefreshHelpers$' in self) {\n        var currentExports = module.__proto__.exports;\n        var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n        // This cannot happen in MainTemplate because the exports mismatch between\n        // templating and execution.\n        self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.i);\n        // A module can be accepted automatically based on its exports, e.g. when\n        // it is a Refresh Boundary.\n        if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n            // Save the previous exports on update so we can compare the boundary\n            // signatures.\n            module.hot.dispose(function (data) {\n                data.prevExports = currentExports;\n            });\n            // Unconditionally accept an update to this module, we'll check if it's\n            // still a Refresh Boundary later.\n            module.hot.accept();\n            // This field is set when the previous version of this module was a\n            // Refresh Boundary, letting us know we need to check for invalidation or\n            // enqueue an update.\n            if (prevExports !== null) {\n                // A boundary can become ineligible if its exports are incompatible\n                // with the previous exports.\n                //\n                // For example, if you add/remove/change exports, we'll want to\n                // re-execute the importing modules, and force those components to\n                // re-render. Similarly, if you convert a class component to a\n                // function, we want to invalidate the boundary.\n                if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                    module.hot.invalidate();\n                }\n                else {\n                    self.$RefreshHelpers$.scheduleUpdate();\n                }\n            }\n        }\n        else {\n            // Since we just executed the code for the module, it's possible that the\n            // new exports made it ineligible for being a boundary.\n            // We only care about the case when we were _previously_ a boundary,\n            // because we already accepted this update (accidental side effect).\n            var isNoLongerABoundary = prevExports !== null;\n            if (isNoLongerABoundary) {\n                module.hot.invalidate();\n            }\n        }\n    }\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../next/node_modules/next/dist/compiled/webpack/harmony-module.js */ \"./node_modules/next/dist/compiled/webpack/harmony-module.js\")(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL3VpL3NyYy9jb21wb25lbnRzL0dhbWVQYWdlL0dhbWVQYWdlLnVzZUJhdHRsZUVmZmVjdHMudHM/NmNhOSJdLCJuYW1lcyI6WyJTQ1JFRU5TSE9UIiwidXNlQmF0dGxlRWZmZWN0cyIsIm9wdHMiLCJhcGkiLCJzZXNzaW9uSWQiLCJzdGF0ZSIsImFjdGlvbnMiLCJtb2RlIiwibWV0YSIsInVpIiwiYmF0dGxlTmF2QWN0aW9ucyIsInVzZUJhdHRsZU5hdiIsImFwcEFjdGlvbnMiLCJ1c2VBcHBBY3Rpb25zIiwianVzdFN0YXJ0ZWROZXciLCJ1c2VSZWYiLCJ1c2VyIiwidXNlQ3VycmVudFVzZXIiLCJpc01vdW50ZWQiLCJ1c2VJc01vdW50ZWQiLCJyZW1vdGVBUEkiLCJ1c2VSZW1vdGVBUEkiLCJ1c2VFZmZlY3QiLCJnYW1lIiwic2V0R2FtZUFQSSIsInVuc3ViUmVmIiwiY3VycmVudCIsInNlc3Npb25JZFR5cGUiLCJiYXR0bGUiLCJzdWJzY3JpYmUiLCJsaXN0ZW5lciIsInNlc3Npb24iLCJzdWJzY3JpcHRpb25VcGRhdGUiLCJzZXROYXYiLCJtYWtlR2FtZU5hdiIsIm1ha2VTZXNzaW9uTmF2IiwiaXNOZXciLCJCb29sZWFuIiwibWF0Y2giLCJzZXRMYXRlc3RWaXNpdGVkR2FtZUlkIiwiZ2FtZUlkIiwiY29kZSIsInNsaWNlIiwibmV3TG9jYWxTZXNzaW9uIiwibG9hZFNlc3Npb24iLCJ3aXBlIiwiY3VycmVudFNlc3Npb25JZCIsImlkIiwiaGFzTW92ZXMiLCJoaXN0b3J5IiwibGVuZ3RoIiwic2V0TGF0ZXN0U2Vzc2lvbkluZm8iLCJ0b1Nlc3Npb24iLCJjb25zb2xlIiwibG9nIiwic3ByaXRlczJhcnJhbmdlbWVudCIsImljb25NYXAiLCJzcHJpdGVzIiwiYm9hcmQyc3ByaXRlcyIsIm1hcmtzIiwiYm9hcmQiLCJ1bml0cyIsInBvdGVudGlhbE1hcmtzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFP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QyxNQUFMLEVBQWFNLGdCQUFiLENBQXBCO0FBQ0FwQyxzQkFBZ0IsQ0FBQzBDLFNBQWpCLENBQTJCTixnQkFBM0IsRUFBNkMsU0FBN0MsRUFBd0QsSUFBeEQ7QUFDRDtBQUNGLEdBWFEsRUFXTixDQUFDMUMsU0FBRCxFQUFZMEMsZ0JBQVosRUFBOEJFLFFBQTlCLENBWE0sQ0FBVDtBQVlBbEMsZ0JBQWMsQ0FBQ1ksT0FBZixHQUF5QixLQUF6QixDQS9FMkQsQ0FpRjNEOztBQUNBLE1BQUkxQixVQUFVLElBQUlPLElBQUksS0FBSyxTQUEzQixFQUFzQztBQUNwQzhDLFdBQU8sQ0FBQ0MsR0FBUixDQUNFLFlBREYsRUFFRUMsbUVBQW1CLENBQUM7QUFDbEJDLGFBQU8sRUFBRXJELEdBQUcsQ0FBQ3FELE9BREs7QUFFbEJDLGFBQU8sRUFBRUMsNkRBQWEsQ0FBQztBQUNyQkYsZUFBTyxFQUFFckQsR0FBRyxDQUFDcUQsT0FEUTtBQUVyQkcsYUFBSyxFQUFFbEQsRUFBRSxDQUFDbUQsS0FBSCxDQUFTRCxLQUZLO0FBR3JCRSxhQUFLLEVBQUVwRCxFQUFFLENBQUNtRCxLQUFILENBQVNDLEtBSEs7QUFJckJDLHNCQUFjLEVBQUVyRCxFQUFFLENBQUNtRCxLQUFILENBQVNFO0FBSkosT0FBRDtBQUZKLEtBQUQsQ0FGckI7QUFZRDtBQUNGOztHQWhHZTdELGdCO1VBRVdVLHNELEVBQ05FLHVELEVBRU5JLG9FLEVBQ0tFLHFELEVBR0FFLGtFIiwiZmlsZSI6Ii4uL3VpL3NyYy9jb21wb25lbnRzL0dhbWVQYWdlL0dhbWVQYWdlLnVzZUJhdHRsZUVmZmVjdHMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgQWxnb2xCYXR0bGVVSSxcbiAgQWxnb2xHYW1lQmxvYkFub24sXG4gIEFsZ29sTWV0YSxcbiAgQWxnb2xTdGF0aWNHYW1lQVBJLFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7XG4gIHNldExhdGVzdFNlc3Npb25JbmZvLFxuICBzZXRMYXRlc3RWaXNpdGVkR2FtZUlkLFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vbG9jYWwvZXhwb3NlXCI7XG5pbXBvcnQgeyBCYXR0bGVNb2RlLCB1c2VBcHBBY3Rpb25zLCB1c2VCYXR0bGVOYXYgfSBmcm9tIFwiLi4vLi4vY29udGV4dHNcIjtcbmltcG9ydCB7XG4gIEJhdHRsZUhvb2tTdGF0ZSxcbiAgQmF0dGxlQWN0aW9ucyxcbn0gZnJvbSBcIi4vR2FtZVBhZ2UudXNlQmF0dGxlQWN0aW9uc0FuZFN0YXRlXCI7XG5pbXBvcnQgeyBtYWtlR2FtZU5hdiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vbmF2L21ha2VHYW1lTmF2XCI7XG5pbXBvcnQgeyBtYWtlU2Vzc2lvbk5hdiB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21tb24vbmF2L21ha2VTZXNzaW9uTmF2XCI7XG5pbXBvcnQgeyB1c2VDdXJyZW50VXNlciwgdXNlUmVtb3RlQVBJIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3JlbW90ZS91dGlscy9jb250ZXh0XCI7XG5pbXBvcnQge1xuICBib2FyZDJzcHJpdGVzLFxuICBzZXNzaW9uSWRUeXBlLFxuICBzcHJpdGVzMmFycmFuZ2VtZW50LFxufSBmcm9tIFwiLi4vLi4vLi4vLi4vY29tbW9uXCI7XG5pbXBvcnQgeyB1c2VJc01vdW50ZWQgfSBmcm9tIFwiLi4vLi4vaGVscGVyc1wiO1xuXG50eXBlIFVzZUJhdHRsZUVmZmVjdHNPcHRzID0ge1xuICBhcGk6IEFsZ29sU3RhdGljR2FtZUFQSTtcbiAgc2Vzc2lvbklkPzogc3RyaW5nIHwgbnVsbDtcbiAgc3RhdGU6IEJhdHRsZUhvb2tTdGF0ZTtcbiAgYWN0aW9uczogQmF0dGxlQWN0aW9ucztcbiAgbW9kZTogQmF0dGxlTW9kZTtcbiAgbWV0YTogQWxnb2xNZXRhPEFsZ29sR2FtZUJsb2JBbm9uPjtcbiAgdWk6IEFsZ29sQmF0dGxlVUk7XG59O1xuXG5jb25zdCBTQ1JFRU5TSE9UID0gZmFsc2U7IC8vIFRPRE8gLSBzZXR0aW5nIHNvbWV3aGVyZSFcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJhdHRsZUVmZmVjdHMob3B0czogVXNlQmF0dGxlRWZmZWN0c09wdHMpIHtcbiAgY29uc3QgeyBhcGksIHNlc3Npb25JZCwgc3RhdGUsIGFjdGlvbnMsIG1vZGUsIG1ldGEsIHVpIH0gPSBvcHRzO1xuICBjb25zdCBiYXR0bGVOYXZBY3Rpb25zID0gdXNlQmF0dGxlTmF2KCk7XG4gIGNvbnN0IGFwcEFjdGlvbnMgPSB1c2VBcHBBY3Rpb25zKCk7XG4gIGNvbnN0IGp1c3RTdGFydGVkTmV3ID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgdXNlciA9IHVzZUN1cnJlbnRVc2VyKCk7XG4gIGNvbnN0IGlzTW91bnRlZCA9IHVzZUlzTW91bnRlZCgpO1xuXG4gIC8vIHJlZ2lzdGVyIGFwaSB3aXRoIHJlbW90ZSBzZXJ2aWNlXG4gIGNvbnN0IHJlbW90ZUFQSSA9IHVzZVJlbW90ZUFQSSgpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlbW90ZUFQSS5nYW1lLnNldEdhbWVBUEkoYXBpKTtcbiAgICByZXR1cm4gKCkgPT4gcmVtb3RlQVBJLmdhbWUuc2V0R2FtZUFQSShudWxsKTtcbiAgfSwgW2FwaV0pO1xuXG4gIC8vIHN1YnNjcmliZSB0byByZW1vdGUgZ2FtZVxuICBjb25zdCB1bnN1YlJlZiA9IHVzZVJlZjwoKSA9PiB2b2lkPigpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHVuc3ViUmVmLmN1cnJlbnQ/LigpO1xuICAgIGlmIChzZXNzaW9uSWQgJiYgc2Vzc2lvbklkVHlwZShzZXNzaW9uSWQpID09PSBcInJlbW90ZVwiKSB7XG4gICAgICB1bnN1YlJlZi5jdXJyZW50ID0gcmVtb3RlQVBJLmJhdHRsZS5zdWJzY3JpYmUoe1xuICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgIGxpc3RlbmVyOiAoeyBiYXR0bGUsIHNlc3Npb24gfSkgPT4ge1xuICAgICAgICAgIGlmIChpc01vdW50ZWQoKSkge1xuICAgICAgICAgICAgYWN0aW9ucy5zdWJzY3JpcHRpb25VcGRhdGUoc2Vzc2lvbiwgYmF0dGxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtzZXNzaW9uSWRdKTtcblxuICAvLyB1cGRhdGUgbmF2IG1hcCB3aGVuZXZlciB3ZSBjaGFuZ2UgbW9kZSBvciBzZXNzaW9uSWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBhcHBBY3Rpb25zLnNldE5hdihcbiAgICAgIG1vZGUgPT09IFwiZ2FtZWxvYmJ5XCIgfHwgKHNlc3Npb25JZFR5cGUoc2Vzc2lvbklkKSA9PT0gXCJyZW1vdGVcIiAmJiAhdXNlcilcbiAgICAgICAgPyBtYWtlR2FtZU5hdihtZXRhKVxuICAgICAgICA6IG1ha2VTZXNzaW9uTmF2KHtcbiAgICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgICBzZXNzaW9uOiBzdGF0ZS5zZXNzaW9uISxcbiAgICAgICAgICAgIGJhdHRsZU5hdkFjdGlvbnMsXG4gICAgICAgICAgICBtZXRhLFxuICAgICAgICAgICAgaXNOZXc6IEJvb2xlYW4oc2Vzc2lvbklkICYmIHNlc3Npb25JZC5tYXRjaCgvbmV3LykpLFxuICAgICAgICAgIH0pXG4gICAgKTtcbiAgfSwgW21vZGUsIHNlc3Npb25JZCwgYXBwQWN0aW9ucywgYmF0dGxlTmF2QWN0aW9ucywgdXNlcl0pO1xuXG4gIC8vIFJlZ2lzdGVyIGxhc3QgdmlzaXRlZCBnYW1lXG4gIHVzZUVmZmVjdCgoKSA9PiBzZXRMYXRlc3RWaXNpdGVkR2FtZUlkKGFwaS5nYW1lSWQpLCBbYXBpLmdhbWVJZF0pO1xuXG4gIC8vIElmIHNlc3Npb25JZCBjaGFuZ2VkLCBnZXQgY29ycmVjdCBzZXNzaW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgaWYgKHNlc3Npb25JZC5tYXRjaCgvXm5ld18vKSkge1xuICAgICAgICBjb25zdCBjb2RlID0gc2Vzc2lvbklkLnNsaWNlKDQpO1xuICAgICAgICBqdXN0U3RhcnRlZE5ldy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgYWN0aW9ucy5uZXdMb2NhbFNlc3Npb24oY29kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3Rpb25zLmxvYWRTZXNzaW9uKHNlc3Npb25JZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdGlvbnMud2lwZSgpO1xuICAgIH1cbiAgfSwgW3Nlc3Npb25JZCwgYXBpXSk7XG4gIGNvbnN0IGN1cnJlbnRTZXNzaW9uSWQgPSBzdGF0ZS5zZXNzaW9uICYmIHN0YXRlLnNlc3Npb24uaWQ7XG4gIGNvbnN0IGhhc01vdmVzID0gKChzdGF0ZS5iYXR0bGUgJiYgc3RhdGUuYmF0dGxlLmhpc3RvcnkubGVuZ3RoKSB8fCAwKSA+PSAyO1xuXG4gIC8vIElmIHdlJ3JlIGluIGEgbmV3IHNlc3Npb24gdGhhdCBub3cgaGFzIHByb3BlciBoaXN0b3J5LCBuYXZpZ2F0ZSB0byBpdCBhbmQgcmVtZW1iZXIgaXQgYXMgbGFzdCBzZXNzaW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWp1c3RTdGFydGVkTmV3LmN1cnJlbnQgJiZcbiAgICAgIHNlc3Npb25JZCAmJlxuICAgICAgc2Vzc2lvbklkLm1hdGNoKC9ebmV3Xy8pICYmXG4gICAgICBjdXJyZW50U2Vzc2lvbklkICYmXG4gICAgICBoYXNNb3Zlc1xuICAgICkge1xuICAgICAgc2V0TGF0ZXN0U2Vzc2lvbkluZm8oYXBpLmdhbWVJZCwgY3VycmVudFNlc3Npb25JZCk7XG4gICAgICBiYXR0bGVOYXZBY3Rpb25zLnRvU2Vzc2lvbihjdXJyZW50U2Vzc2lvbklkLCBcInBsYXlpbmdcIiwgdHJ1ZSk7XG4gICAgfVxuICB9LCBbc2Vzc2lvbklkLCBjdXJyZW50U2Vzc2lvbklkLCBoYXNNb3Zlc10pO1xuICBqdXN0U3RhcnRlZE5ldy5jdXJyZW50ID0gZmFsc2U7XG5cbiAgLy8gUHJpbnQgYm9hcmQgc3RhdGVcbiAgaWYgKFNDUkVFTlNIT1QgJiYgbW9kZSA9PT0gXCJwbGF5aW5nXCIpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiU0NSRUVOU0hPVFwiLFxuICAgICAgc3ByaXRlczJhcnJhbmdlbWVudCh7XG4gICAgICAgIGljb25NYXA6IGFwaS5pY29uTWFwLFxuICAgICAgICBzcHJpdGVzOiBib2FyZDJzcHJpdGVzKHtcbiAgICAgICAgICBpY29uTWFwOiBhcGkuaWNvbk1hcCxcbiAgICAgICAgICBtYXJrczogdWkuYm9hcmQubWFya3MsXG4gICAgICAgICAgdW5pdHM6IHVpLmJvYXJkLnVuaXRzLFxuICAgICAgICAgIHBvdGVudGlhbE1hcmtzOiB1aS5ib2FyZC5wb3RlbnRpYWxNYXJrcyxcbiAgICAgICAgfSksXG4gICAgICB9KVxuICAgICk7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../ui/src/components/GamePage/GamePage.useBattleEffects.ts\n");

/***/ })

})