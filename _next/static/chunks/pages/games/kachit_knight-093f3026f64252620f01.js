_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[177],{G6An:function(e,t,r){"use strict";r.d(t,"b",(function(){return n}));var n={initial:{unit1:{pos:"d1",id:"unit1",group:"leader",owner:1,icon:"pawn"},unit2:{pos:"a4",id:"unit2",group:"leader",owner:2,icon:"pawn"}},patches:[{spawn1:[{pos:"c2",id:"spawn1",group:"knightdiag",owner:1,icon:"bishop"}]},{spawn2:[{pos:"b3",id:"spawn2",group:"knightdiag",owner:2,icon:"bishop"}]},{spawn3:[{pos:"d3",id:"spawn3",group:"knightortho",owner:1,icon:"rook"}]},{spawn4:[{pos:"b4",id:"spawn4",group:"knightortho",owner:2,icon:"rook"}]},{unit1:{pos:["d1","d2"]}},{spawn5:[{pos:"a2",id:"spawn5",group:"knightortho",owner:2,icon:"rook"}]},{unit1:{pos:["d2","c3"],group:["leader","leaderortho"],icon:["pawn","king"]}},{spawn1:[{pos:"c2",id:"spawn1",group:"knightdiag",owner:1,icon:"bishop"},0,0],spawn5:{pos:["a2","c2"]}},{unit1:{pos:["c3","b4"],group:["leaderortho","leaderdiag"],icon:["king","queen"]},spawn4:[{pos:"b4",id:"spawn4",group:"knightortho",owner:2,icon:"rook"},0,0]},{unit1:[{pos:"b4",x:4,y:1,id:"unit1",group:"leaderdiag",owner:1,icon:"queen"},0,0],unit2:{pos:["a4","b4"]}}],anims:{},endHighlight:["b4"]};t.a=n},"V+/p":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/games/kachit_knight",function(){return r("av5h")}])},av5h:function(e,t,r){"use strict";r.r(t),r.d(t,"Game",(function(){return D}));var n=r("ERkP"),o=r.n(n),i=r("rePB"),a=r("cDpP");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g,u,p,h,m={},T={leader:"pawn",knightortho:"rook",knightdiag:"bishop",leaderortho:"king",leaderdiag:"queen"},A={leader:[["units","leader"],["units","myunits","leader","myleader"],["units","oppunits","leader","oppleader"]],knightortho:[["units","knightortho"],["units","myunits","knightortho","myknightortho"],["units","oppunits","knightortho","oppknightortho"]],knightdiag:[["units","knightdiag"],["units","myunits","knightdiag","myknightdiag"],["units","oppunits","knightdiag","oppknightdiag"]],leaderortho:[["units","leaderortho"],["units","myunits","leaderortho","myleaderortho"],["units","oppunits","leaderortho","oppleaderortho"]],leaderdiag:[["units","leaderdiag"],["units","myunits","leaderdiag","myleaderdiag"],["units","oppunits","leaderdiag","oppleaderdiag"]]},y={leader:[["units","leader"],["units","oppunits","leader","oppleader"],["units","myunits","leader","myleader"]],knightortho:[["units","knightortho"],["units","oppunits","knightortho","oppknightortho"],["units","myunits","knightortho","myknightortho"]],knightdiag:[["units","knightdiag"],["units","oppunits","knightdiag","oppknightdiag"],["units","myunits","knightdiag","myknightdiag"]],leaderortho:[["units","leaderortho"],["units","oppunits","leaderortho","oppleaderortho"],["units","myunits","leaderortho","myleaderortho"]],leaderdiag:[["units","leaderdiag"],["units","oppunits","leaderdiag","oppleaderdiag"],["units","myunits","leaderdiag","myleaderdiag"]]},k={movetargets:{}},b={gameId:"kachitknight",commands:{step:{},orthogonal:{},diagonal:{}},iconMap:T,setBoard:function(e){g=Object(a.P)(e,1),u=Object(a.P)(e,2),h={height:e.height,width:e.width},Object(a.e)(h),p=Object(a.d)(e),Object(a.A)(e)},newBattle:function(e,t){var r=Object(a.M)(e),n={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}};for(var o in r){var i,s=r[o],l=s.group,c=s.pos,g=s.owner,u=d(y[l][g]);try{for(u.s();!(i=u.n()).done;){n[i.value][c]=s}}catch(p){u.e(p)}finally{u.f()}}return b.action["startTurn_".concat(t,"_1")]({NEXTSPAWNID:1,BATTLEVARS:{},TURN:0,UNITDATA:r,UNITLAYERS:n})},action:{startTurn_basic_1:function(e){for(var t=e.UNITLAYERS,r={units:t.units,myunits:t.oppunits,oppunits:t.myunits,leader:t.leader,myleader:t.oppleader,oppleader:t.myleader,knightortho:t.knightortho,myknightortho:t.oppknightortho,oppknightortho:t.myknightortho,knightdiag:t.knightdiag,myknightdiag:t.oppknightdiag,oppknightdiag:t.myknightdiag,leaderortho:t.leaderortho,myleaderortho:t.oppleaderortho,oppleaderortho:t.myleaderortho,leaderdiag:t.leaderdiag,myleaderdiag:t.oppleaderdiag,oppleaderdiag:t.myleaderdiag},n={marks:{},commands:{}},o=e.BATTLEVARS,i=0,a=Object.keys(r.myunits);i<a.length;i++){var s=a[i];n.marks[s]="selectunit_basic_1"}if(3>(o.plr1knights||0))for(var l=0,d=Object.keys(Object.keys(g.mybase).filter((function(e){return!r.units.hasOwnProperty(e)})).reduce((function(e,t){return e[t]=m,e}),{}));l<d.length;l++){var c=d[l];n.marks[c]="selectdroptarget_basic_1"}return{UNITDATA:e.UNITDATA,LINKS:n,UNITLAYERS:r,ARTIFACTS:k,MARKS:{},TURN:e.TURN+1,NEXTSPAWNID:e.NEXTSPAWNID,BATTLEVARS:o}},startTurn_basic_2:function(e){for(var t=e.UNITLAYERS,r={units:t.units,myunits:t.oppunits,oppunits:t.myunits,leader:t.leader,myleader:t.oppleader,oppleader:t.myleader,knightortho:t.knightortho,myknightortho:t.oppknightortho,oppknightortho:t.myknightortho,knightdiag:t.knightdiag,myknightdiag:t.oppknightdiag,oppknightdiag:t.myknightdiag,leaderortho:t.leaderortho,myleaderortho:t.oppleaderortho,oppleaderortho:t.myleaderortho,leaderdiag:t.leaderdiag,myleaderdiag:t.oppleaderdiag,oppleaderdiag:t.myleaderdiag},n={marks:{},commands:{}},o=e.BATTLEVARS,i=0,a=Object.keys(r.myunits);i<a.length;i++){var s=a[i];n.marks[s]="selectunit_basic_2"}if(3>(o.plr2knights||0))for(var l=0,d=Object.keys(Object.keys(u.mybase).filter((function(e){return!r.units.hasOwnProperty(e)})).reduce((function(e,t){return e[t]=m,e}),{}));l<d.length;l++){var c=d[l];n.marks[c]="selectdroptarget_basic_2"}return{UNITDATA:e.UNITDATA,LINKS:n,UNITLAYERS:r,ARTIFACTS:k,MARKS:{},TURN:e.TURN,NEXTSPAWNID:e.NEXTSPAWNID,BATTLEVARS:o}},selectunit_basic_1:function(e,t){var r={movetargets:{}},n={marks:{},commands:{}},o={selectunit:t},i=e.UNITLAYERS;if(i.myleader[o.selectunit]||i.myleaderortho[o.selectunit]||i.myleaderdiag[o.selectunit]){var s,l=p[o.selectunit],c=d(a.J);try{for(c.s();!(s=c.n()).done;){var g=l[s.value];g&&(i.myunits[g]||(r.movetargets[g]=m))}}catch(O){c.e(O)}finally{c.f()}}if(i.myleaderortho[o.selectunit]||i.myknightortho[o.selectunit]){var u,h=i.units,T=d(a.D);try{for(T.s();!(u=T.n()).done;){for(var A=u.value,y=o.selectunit;(y=p[y][A])&&!h[y];)r.movetargets[y]=m;h[y]&&i.oppunits[y]&&(r.movetargets[y]=m)}}catch(O){T.e(O)}finally{T.f()}}if(i.myleaderdiag[o.selectunit]||i.myknightdiag[o.selectunit]){var k,b=i.units,v=d(a.n);try{for(v.s();!(k=v.n()).done;){for(var f=k.value,S=o.selectunit;(S=p[S][f])&&!b[S];)r.movetargets[S]=m;b[S]&&i.oppunits[S]&&(r.movetargets[S]=m)}}catch(O){v.e(O)}finally{v.f()}}for(var N=0,R=Object.keys(r.movetargets);N<R.length;N++){var I=R[N];n.marks[I]="selectmovetarget_basic_1"}return{LINKS:n,ARTIFACTS:r,UNITLAYERS:i,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:o,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID}},selectdroptarget_basic_1:function(e,t){var r={marks:{},commands:{}};return r.commands.orthogonal="orthogonal_basic_1",r.commands.diagonal="diagonal_basic_1",{LINKS:r,ARTIFACTS:e.ARTIFACTS,UNITLAYERS:e.UNITLAYERS,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:{selectdroptarget:t},BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID,canAlwaysEnd:!0}},selectmovetarget_basic_1:function(e,t){var r={marks:{},commands:{}},n={selectunit:e.MARKS.selectunit,selectmovetarget:t},o=e.UNITLAYERS;return o.leader[n.selectunit]&&!g.promotion[n.selectmovetarget]?r.commands.step="step_basic_1":(r.commands.orthogonal="orthogonal_basic_1",r.commands.diagonal="diagonal_basic_1"),{LINKS:r,ARTIFACTS:e.ARTIFACTS,UNITLAYERS:o,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:n,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID,canAlwaysEnd:!0}},selectunit_basic_2:function(e,t){var r={movetargets:{}},n={marks:{},commands:{}},o={selectunit:t},i=e.UNITLAYERS;if(i.myleader[o.selectunit]||i.myleaderortho[o.selectunit]||i.myleaderdiag[o.selectunit]){var s,l=p[o.selectunit],c=d(a.J);try{for(c.s();!(s=c.n()).done;){var g=l[s.value];g&&(i.myunits[g]||(r.movetargets[g]=m))}}catch(O){c.e(O)}finally{c.f()}}if(i.myleaderortho[o.selectunit]||i.myknightortho[o.selectunit]){var u,h=i.units,T=d(a.D);try{for(T.s();!(u=T.n()).done;){for(var A=u.value,y=o.selectunit;(y=p[y][A])&&!h[y];)r.movetargets[y]=m;h[y]&&i.oppunits[y]&&(r.movetargets[y]=m)}}catch(O){T.e(O)}finally{T.f()}}if(i.myleaderdiag[o.selectunit]||i.myknightdiag[o.selectunit]){var k,b=i.units,v=d(a.n);try{for(v.s();!(k=v.n()).done;){for(var f=k.value,S=o.selectunit;(S=p[S][f])&&!b[S];)r.movetargets[S]=m;b[S]&&i.oppunits[S]&&(r.movetargets[S]=m)}}catch(O){v.e(O)}finally{v.f()}}for(var N=0,R=Object.keys(r.movetargets);N<R.length;N++){var I=R[N];n.marks[I]="selectmovetarget_basic_2"}return{LINKS:n,ARTIFACTS:r,UNITLAYERS:i,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:o,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID}},selectdroptarget_basic_2:function(e,t){var r={marks:{},commands:{}};return r.commands.orthogonal="orthogonal_basic_2",r.commands.diagonal="diagonal_basic_2",{LINKS:r,ARTIFACTS:e.ARTIFACTS,UNITLAYERS:e.UNITLAYERS,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:{selectdroptarget:t},BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID,canAlwaysEnd:!0}},selectmovetarget_basic_2:function(e,t){var r={marks:{},commands:{}},n={selectunit:e.MARKS.selectunit,selectmovetarget:t},o=e.UNITLAYERS;return o.leader[n.selectunit]&&!u.promotion[n.selectmovetarget]?r.commands.step="step_basic_2":(r.commands.orthogonal="orthogonal_basic_2",r.commands.diagonal="diagonal_basic_2"),{LINKS:r,ARTIFACTS:e.ARTIFACTS,UNITLAYERS:o,UNITDATA:e.UNITDATA,TURN:e.TURN,MARKS:n,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID,canAlwaysEnd:!0}},step_basic_1:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.UNITDATA),o=e.MARKS;delete n[(r.units[o.selectmovetarget]||{}).id];var a=(r.units[o.selectunit]||{}).id;for(var s in a&&(n[a]=l(l({},n[a]),{},{pos:o.selectmovetarget})),r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},n){var c,u=n[s],p=u.group,h=u.pos,m=u.owner,T=d(A[p][m]);try{for(T.s();!(c=T.n()).done;){r[c.value][h]=u}}catch(y){T.e(y)}finally{T.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},o.selectmovetarget,1))):r.myleader[Object.keys(g.oppthrone)[0]]||r.myleaderortho[Object.keys(g.oppthrone)[0]]||r.myleaderdiag[Object.keys(g.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(g.oppthrone)):t.endTurn="startTurn_basic_2",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:n,UNITLAYERS:r,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID}},orthogonal_basic_1:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.BATTLEVARS),o=l({},e.UNITDATA),a=e.NEXTSPAWNID,s=e.MARKS;if(s.selectdroptarget){n.plr1knights=(n.plr1knights||0)+1;var c="spawn"+a++;o[c]={pos:s.selectdroptarget,id:c,group:"knightortho",owner:1}}if(s.selectunit){if(r.leader[s.selectunit]||r.leaderdiag[s.selectunit]){var u=(r.units[s.selectunit]||{}).id;u&&(o[u]=l(l({},o[u]),{},{group:"leaderortho"}))}if(r.knightdiag[s.selectunit]){var p=(r.units[s.selectunit]||{}).id;p&&(o[p]=l(l({},o[p]),{},{group:"knightortho"}))}delete o[(r.units[s.selectmovetarget]||{}).id];var h=(r.units[s.selectunit]||{}).id;h&&(o[h]=l(l({},o[h]),{},{pos:s.selectmovetarget}))}for(var m in r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},o){var T,y=o[m],k=y.group,b=y.pos,v=y.owner,f=d(A[k][v]);try{for(f.s();!(T=f.n()).done;){r[T.value][b]=y}}catch(S){f.e(S)}finally{f.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},s.selectmovetarget,1))):r.myleader[Object.keys(g.oppthrone)[0]]||r.myleaderortho[Object.keys(g.oppthrone)[0]]||r.myleaderdiag[Object.keys(g.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(g.oppthrone)):t.endTurn="startTurn_basic_2",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:o,UNITLAYERS:r,BATTLEVARS:n,NEXTSPAWNID:a}},diagonal_basic_1:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.BATTLEVARS),o=l({},e.UNITDATA),a=e.NEXTSPAWNID,s=e.MARKS;if(s.selectdroptarget){n.plr1knights=(n.plr1knights||0)+1;var c="spawn"+a++;o[c]={pos:s.selectdroptarget,id:c,group:"knightdiag",owner:1}}if(s.selectunit){if(r.leader[s.selectunit]||r.leaderortho[s.selectunit]){var u=(r.units[s.selectunit]||{}).id;u&&(o[u]=l(l({},o[u]),{},{group:"leaderdiag"}))}if(r.knightortho[s.selectunit]){var p=(r.units[s.selectunit]||{}).id;p&&(o[p]=l(l({},o[p]),{},{group:"knightdiag"}))}delete o[(r.units[s.selectmovetarget]||{}).id];var h=(r.units[s.selectunit]||{}).id;h&&(o[h]=l(l({},o[h]),{},{pos:s.selectmovetarget}))}for(var m in r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},o){var T,y=o[m],k=y.group,b=y.pos,v=y.owner,f=d(A[k][v]);try{for(f.s();!(T=f.n()).done;){r[T.value][b]=y}}catch(S){f.e(S)}finally{f.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},s.selectmovetarget,1))):r.myleader[Object.keys(g.oppthrone)[0]]||r.myleaderortho[Object.keys(g.oppthrone)[0]]||r.myleaderdiag[Object.keys(g.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(g.oppthrone)):t.endTurn="startTurn_basic_2",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:o,UNITLAYERS:r,BATTLEVARS:n,NEXTSPAWNID:a}},step_basic_2:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.UNITDATA),o=e.MARKS;delete n[(r.units[o.selectmovetarget]||{}).id];var a=(r.units[o.selectunit]||{}).id;for(var s in a&&(n[a]=l(l({},n[a]),{},{pos:o.selectmovetarget})),r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},n){var c,g=n[s],p=g.group,h=g.pos,m=g.owner,T=d(y[p][m]);try{for(T.s();!(c=T.n()).done;){r[c.value][h]=g}}catch(A){T.e(A)}finally{T.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},o.selectmovetarget,1))):r.myleader[Object.keys(u.oppthrone)[0]]||r.myleaderortho[Object.keys(u.oppthrone)[0]]||r.myleaderdiag[Object.keys(u.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(u.oppthrone)):t.endTurn="startTurn_basic_1",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:n,UNITLAYERS:r,BATTLEVARS:e.BATTLEVARS,NEXTSPAWNID:e.NEXTSPAWNID}},orthogonal_basic_2:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.BATTLEVARS),o=l({},e.UNITDATA),a=e.NEXTSPAWNID,s=e.MARKS;if(s.selectdroptarget){n.plr2knights=(n.plr2knights||0)+1;var c="spawn"+a++;o[c]={pos:s.selectdroptarget,id:c,group:"knightortho",owner:2}}if(s.selectunit){if(r.leader[s.selectunit]||r.leaderdiag[s.selectunit]){var g=(r.units[s.selectunit]||{}).id;g&&(o[g]=l(l({},o[g]),{},{group:"leaderortho"}))}if(r.knightdiag[s.selectunit]){var p=(r.units[s.selectunit]||{}).id;p&&(o[p]=l(l({},o[p]),{},{group:"knightortho"}))}delete o[(r.units[s.selectmovetarget]||{}).id];var h=(r.units[s.selectunit]||{}).id;h&&(o[h]=l(l({},o[h]),{},{pos:s.selectmovetarget}))}for(var m in r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},o){var T,A=o[m],k=A.group,b=A.pos,v=A.owner,f=d(y[k][v]);try{for(f.s();!(T=f.n()).done;){r[T.value][b]=A}}catch(S){f.e(S)}finally{f.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},s.selectmovetarget,1))):r.myleader[Object.keys(u.oppthrone)[0]]||r.myleaderortho[Object.keys(u.oppthrone)[0]]||r.myleaderdiag[Object.keys(u.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(u.oppthrone)):t.endTurn="startTurn_basic_1",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:o,UNITLAYERS:r,BATTLEVARS:n,NEXTSPAWNID:a}},diagonal_basic_2:function(e){var t={marks:{},commands:{}},r=e.UNITLAYERS,n=l({},e.BATTLEVARS),o=l({},e.UNITDATA),a=e.NEXTSPAWNID,s=e.MARKS;if(s.selectdroptarget){n.plr2knights=(n.plr2knights||0)+1;var c="spawn"+a++;o[c]={pos:s.selectdroptarget,id:c,group:"knightdiag",owner:2}}if(s.selectunit){if(r.leader[s.selectunit]||r.leaderortho[s.selectunit]){var g=(r.units[s.selectunit]||{}).id;g&&(o[g]=l(l({},o[g]),{},{group:"leaderdiag"}))}if(r.knightortho[s.selectunit]){var p=(r.units[s.selectunit]||{}).id;p&&(o[p]=l(l({},o[p]),{},{group:"knightdiag"}))}delete o[(r.units[s.selectmovetarget]||{}).id];var h=(r.units[s.selectunit]||{}).id;h&&(o[h]=l(l({},o[h]),{},{pos:s.selectmovetarget}))}for(var m in r={units:{},myunits:{},oppunits:{},leader:{},myleader:{},oppleader:{},knightortho:{},myknightortho:{},oppknightortho:{},knightdiag:{},myknightdiag:{},oppknightdiag:{},leaderortho:{},myleaderortho:{},oppleaderortho:{},leaderdiag:{},myleaderdiag:{},oppleaderdiag:{}},o){var T,A=o[m],k=A.group,b=A.pos,v=A.owner,f=d(y[k][v]);try{for(f.s();!(T=f.n()).done;){r[T.value][b]=A}}catch(S){f.e(S)}finally{f.f()}}return 0===Object.keys(r.oppleader).length&&0===Object.keys(r.oppleaderdiag).length&&0===Object.keys(r.oppleaderortho).length?(t.endGame="win",t.endedBy="regicide",t.endMarks=Object.keys(Object(i.a)({},s.selectmovetarget,1))):r.myleader[Object.keys(u.oppthrone)[0]]||r.myleaderortho[Object.keys(u.oppthrone)[0]]||r.myleaderdiag[Object.keys(u.oppthrone)[0]]?(t.endGame="win",t.endedBy="infiltration",t.endMarks=Object.keys(u.oppthrone)):t.endTurn="startTurn_basic_1",{LINKS:t,MARKS:{},ARTIFACTS:e.ARTIFACTS,TURN:e.TURN,UNITDATA:o,UNITLAYERS:r,BATTLEVARS:n,NEXTSPAWNID:a}}},instruction:{startTurn_basic_1:function(e){var t=e.BATTLEVARS;return Object(a.g)({line:[{select:"Select"},{text:"unit to act with"},3>(t.plr1knights||0)?Object(a.g)({line:[{text:"or empty square in your castle to drop"},2===t.plr1knights?Object(a.g)({line:[{text:"your last knight"}]}):Object(a.g)({line:[{text:"one of your"},{text:3-(t.plr1knights||0)},{text:"remaining knights"}]})]}):void 0]})},step_basic_1:function(){return Object(a.l)(1)},orthogonal_basic_1:function(){return Object(a.l)(1)},diagonal_basic_1:function(){return Object(a.l)(1)},selectunit_basic_1:function(e){var t=e.MARKS,r=e.UNITLAYERS;return Object(a.g)({line:[{select:"Select"},{text:"where to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]}]})},selectdroptarget_basic_1:function(e){var t=e.MARKS;return Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to drop"},{unit:["rook",1,t.selectdroptarget]},{text:"or"},{command:"diagonal"},{text:"to drop"},{unit:["bishop",1,t.selectdroptarget]}]})},selectmovetarget_basic_1:function(e){var t=e.MARKS,r=e.UNITLAYERS;return r.leader[t.selectunit]?g.promotion[t.selectmovetarget]?Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to promote"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},{unit:["king",1,t.selectmovetarget]},{text:"or"},{command:"diagonal"},{text:"for"},{unit:["queen",1,t.selectmovetarget]}]}):Object(a.g)({line:[{text:"Press"},{command:"step"},{text:"to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},{pos:t.selectmovetarget}]}):Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},r.leaderortho[t.selectunit]||r.leaderdiag[t.selectunit]?{unit:["king",1,t.selectmovetarget]}:{unit:["rook",1,t.selectmovetarget]},{text:"or"},{command:"diagonal"},{text:"for"},r.leaderortho[t.selectunit]||r.leaderdiag[t.selectunit]?{unit:["queen",1,t.selectmovetarget]}:{unit:["bishop",1,t.selectmovetarget]}]})},startTurn_basic_2:function(e){var t=e.BATTLEVARS;return Object(a.g)({line:[{select:"Select"},{text:"unit to act with"},3>(t.plr2knights||0)?Object(a.g)({line:[{text:"or empty square in your castle to drop"},2===t.plr2knights?Object(a.g)({line:[{text:"your last knight"}]}):Object(a.g)({line:[{text:"one of your"},{text:3-(t.plr2knights||0)},{text:"remaining knights"}]})]}):void 0]})},step_basic_2:function(){return Object(a.l)(2)},orthogonal_basic_2:function(){return Object(a.l)(2)},diagonal_basic_2:function(){return Object(a.l)(2)},selectunit_basic_2:function(e){var t=e.MARKS,r=e.UNITLAYERS;return Object(a.g)({line:[{select:"Select"},{text:"where to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]}]})},selectdroptarget_basic_2:function(e){var t=e.MARKS;return Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to drop"},{unit:["rook",2,t.selectdroptarget]},{text:"or"},{command:"diagonal"},{text:"to drop"},{unit:["bishop",2,t.selectdroptarget]}]})},selectmovetarget_basic_2:function(e){var t=e.MARKS,r=e.UNITLAYERS;return r.leader[t.selectunit]?u.promotion[t.selectmovetarget]?Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to promote"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},{unit:["king",2,t.selectmovetarget]},{text:"or"},{command:"diagonal"},{text:"for"},{unit:["queen",2,t.selectmovetarget]}]}):Object(a.g)({line:[{text:"Press"},{command:"step"},{text:"to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},{pos:t.selectmovetarget}]}):Object(a.g)({line:[{text:"Press"},{command:"orthogonal"},{text:"to move"},{unit:[T[(r.units[t.selectunit]||{}).group],(r.units[t.selectunit]||{}).owner,t.selectunit]},{text:"to"},r.leaderortho[t.selectunit]||r.leaderdiag[t.selectunit]?{unit:["king",2,t.selectmovetarget]}:{unit:["rook",2,t.selectmovetarget]},{text:"or"},{command:"diagonal"},{text:"for"},r.leaderortho[t.selectunit]||r.leaderdiag[t.selectunit]?{unit:["queen",2,t.selectmovetarget]}:{unit:["bishop",2,t.selectmovetarget]}]})}},variants:[{ruleset:"basic",board:"basic",setup:"basic",desc:"regular",code:"r",arr:{setup:{leader:{2:["a4"]},leaderortho:{1:["c3"]},knightortho:{1:["d3"],2:["a2","b4"]},knightdiag:{1:["c2"],2:["b3"]}},marks:[],potentialMarks:[]}}],boards:{basic:{height:4,width:4,terrain:{base:{1:["b1","c1","c2","d2","d3"],2:["a2","a3","b3","b4","c4"]},throne:{1:["d1"],2:["a4"]},promotion:["a1","b2","c3","d4"]}}},setups:{basic:{leader:{1:["d1"],2:["a4"]}}}},v=b,f=r("nIA/"),S=Object(f.a)(v),N=r("t8q9"),R=r("ANAK"),I=r("G6An"),O=r("lql/"),_={api:S,graphics:N.a,meta:R.a,demo:I.a,rules:O.a,imgsToPreload:["/images/games/kachitknight/botheditions.jpg"]},j=r("krfZ"),E=r("Xity"),w=r("+zLY"),U=r("0IYK"),L=o.a.createElement,D=function(){var e=Object(U.c)(_.api);return L(E.d.Provider,{value:_},L(E.e.Provider,{value:e},L(j.a,null)))};D.domain="kachitknight",D.mainImage="/images/games/kachitknight/kachitknight_active.png",D.metaDesc="Play the abstract board game Kachit Knight at Chessicals! Switch movement to capture the king!",D.metaTitle="Kachit Knight by Mitsuo Yamamoto",D.title="Kachit Knight",D.preloadImages=_.imgsToPreload,D.nav=Object(w.a)(_.meta);t.default=D}},[["V+/p",1,0,2,3,4,5,6,7,69]]]);